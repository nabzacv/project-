<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحة المنتج</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Roboto:wght@500;700&display=swap" rel="stylesheet">
    <style>
        /* General Styles */
        body {
            font-family: 'Cairo', sans-serif; /* Primary font for Arabic */
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* Prevent horizontal scroll */
            background-color: #f0f2f5; /* Lighter background for overall page to highlight sections */
            direction: rtl; /* Set page direction to Right-to-Left */
            text-align: right; /* Default text alignment for RTL */
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Roboto', sans-serif; /* Secondary font for headings/numbers */
            color: #0056B3; /* Main brand color for headings */
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center; /* Center align headings */
        }

        p {
            text-align: center; /* Default paragraph alignment */
        }

        a {
            color: #0056B3;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        a:hover {
            color: #004085; /* Darker blue on hover */
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Section Padding & Backgrounds (for "frames" effect) */
        section {
            padding: 80px 0; /* Vertical padding for sections */
            text-align: center; /* Center align section content by default */
            margin-bottom: 80px; /* Increased space between sections for "frame" effect */
            border-radius: 15px; /* Rounded corners for the "frame" effect */
            overflow: hidden; /* Ensure content stays within border-radius */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08); /* Subtle shadow for depth */
            position: relative; /* For illustrations/overlays */
            z-index: 1; /* Ensure sections are above body background */
            background-color: #ffffff; /* Default background for most sections */
        }
        /* Override for sections that need specific background */
        #product-details {
            background-color: #ffffff;
            padding-top: 60px; /* Slightly less padding at top for focused product */
            margin-bottom: 15px; /* MODIFIED: For 15px spacing */
        }
        #product-description-usage {
            background-color: #ffffff;
            padding-top: 60px;
            margin-bottom: 50px; /* This is good for spacing with next section */
        }
        #product-gallery {
            background-color: #f8f9fa; /* Light background for gallery */
            margin-bottom: 80px; /* Increased margin for gallery section */
        }
        #why-choose-us {
            margin-bottom: 80px; /* Increased margin for why-choose-us section */
        }
        #faq {
            background-color: #ffffff;
            margin-bottom: 80px; /* Increased margin for FAQ section */
        }
        #cta-final {
            background-color: #ffffff;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            background-color: #ff4d4d; /* Changed to red as per request */
            color: #fff;
            padding: 15px 35px; /* Slightly wider buttons */
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            font-size: 19px; /* Slightly larger font */
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            border: none;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 77, 77, 0.3); /* Stronger shadow, red tone */
        }

        .btn:hover {
            background-color: #cc3d3d; /* Darker red on hover */
            transform: translateY(-5px); /* More pronounced lift */
            box-shadow: 0 8px 20px rgba(255, 77, 77, 0.45); /* Stronger hover shadow, red tone */
        }
    
        /* Offer Header (top banner/button) - MODIFIED: Reverted to prominent red header */
        .offer-header {
            background-color: #ff4d4d; /* Red background */
            color: #fff;
            padding: 15px 0; /* More padding */
            text-align: center;
            font-size: 24px; /* Larger font */
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            box-shadow: 0 5px 15px rgba(255, 77, 77, 0.3); /* Stronger shadow */
            flex-wrap: wrap; /* Allow wrapping */
        }
        /* Countdown within the offer header */
        .offer-header .countdown {
            display: flex;
            gap: 10px;
            direction: ltr; /* Ensure numbers are LTR */
            font-family: 'Roboto', sans-serif;
            background-color: rgba(255,255,255,0.2); /* Lighter transparent background */
            color: #fff;
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 22px; /* Adjusted size for this header */
        }
        .offer-header .countdown span {
            display: flex;
            flex-direction: column;
            align-items: center;
            line-height: 1.2;
        }
        .offer-header .countdown .value {
            font-size: 1.5em; /* Larger value in this header */
            font-weight: bold;
        }
        .offer-header .countdown .label {
            font-size: 0.6em; /* Smaller label */
            opacity: 0.8;
        }

        /* Ensure old countdown-bar styling is gone or hidden */
        .countdown-bar {
            display: none; /* Hide the old neutral countdown bar */
        }

        /* Product Details Section (Hero replacement) */
        #product-details .product-image-main {
            width: 100%;
            max-width: 600px; /* Main image max width */
            height: auto;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 40px;
            display: block; /* Ensure it's a block element for margin auto */
            margin-left: auto;
            margin-right: auto;
        }

        #product-details .product-title {
            font-size: 52px;
            margin-bottom: 10px; /* Less space to bring price closer */
            color: #0056B3;
            font-weight: 700;
        }

        /* NEW PRICE STYLING */
        .price-display-wrapper {
            display: flex;
            justify-content: center; /* Center the price block */
            align-items: center; /* Align items vertically */
            gap: 20px; /* Space between old price and new price box */
            margin-bottom: 30px;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
        }

        .product-old-price {
            font-family: 'Roboto', sans-serif;
            font-size: 28px; /* Smaller than new price */
            color: #888; /* Greyed out */
            text-decoration: line-through; /* Strikethrough effect */
            position: relative;
            display: inline-block; /* To allow animation */
            animation: strikeThroughMove 2s infinite ease-in-out alternate;
            text-align: center; /* Ensure text alignment for price value */
        }

        .product-old-price span {
            font-size: 0.7em; /* Currency unit smaller */
            font-weight: normal;
            color: #888;
            margin-right: 5px; /* Space from numbers */
        }

        .product-current-price-box {
            display: flex; /* Use flex to align currency and number */
            align-items: baseline; /* Align numbers by baseline */
            padding: 10px 20px;
            border: 2px dashed #28a745; /* Dashed border */
            border-radius: 10px;
            background-color: #e6ffe6; /* Light green background */
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer; /* Indicate it's interactive */
            box-shadow: 0 0 15px rgba(40, 167, 69, 0.2); /* Soft shadow */
        }

        .product-current-price-box:hover {
            box-shadow: 0 0 20px rgba(40, 167, 69, 0.4); /* Stronger glow on hover */
            transform: translateY(-3px) scale(1.01); /* Slight lift and scale */
        }

        .product-current-price-box .currency-unit {
            font-family: 'Cairo', sans-serif; /* Use Arabic font for currency */
            font-size: 0.7em; /* Smaller than price value */
            font-weight: normal;
            color: #555;
            margin-left: 5px; /* Space from numbers for RTL */
        }

        .product-current-price-box .price-value {
            font-family: 'Roboto', sans-serif;
            font-size: 48px; /* Large price */
            font-weight: bold;
            color: #28a745; /* Green for price to stand out */
            direction: ltr; /* Ensure price numbers are LTR */
            animation: pulsePrice 1.5s infinite alternate; /* Faster, more noticeable pulsing effect */
        }

        @keyframes pulsePrice { 
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.03); opacity: 0.9; } /* More pronounced scale */
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes strikeThroughMove {
            0% { transform: translateX(0); }
            50% { transform: translateX(5px); }
            100% { transform: translateX(0); }
        }


        /* Product Description & Usage Tabs */
        #product-description-usage {
            padding: 60px 0;
            margin-bottom: 50px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            background-color: #ffffff;
        }
        .tab-buttons {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
        }
        .tab-button {
            background-color: #f8f9fa;
            border: none;
            padding: 15px 30px;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            color: #555;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            transition: all 0.3s ease;
            position: relative;
            top: 2px; /* Adjust to overlap border */
            margin: 0 5px; /* Space between tabs */
        }
        .tab-button.active {
            background-color: #ffffff;
            color: #0056B3;
            border-bottom: 2px solid #0056B3;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.05);
            z-index: 2;
        }
        .tab-button:hover:not(.active) {
            background-color: #e9ecef;
        }
        .tab-content {
            padding: 20px;
            font-size: 18px;
            line-height: 1.8;
            color: #555;
            max-width: 800px;
            margin: 0 auto;
            text-align: justify;
            text-align-last: right;
            display: none; /* Hidden by default */
            animation: fadeIn 0.5s ease-out;
        }
        .tab-content.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Product Gallery Section */
        #product-gallery h2 {
            font-size: 40px;
            margin-bottom: 60px;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px; /* Space between images */
            max-width: 1000px;
            margin: 0 auto;
        }

        .gallery-item img {
            width: 100%;
            height: 250px; /* Fixed height for consistent grid */
            object-fit: cover; /* Cover the area, crop if necessary */
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .gallery-item img:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        /* Why Choose Us Section Specifics (retained and adjusted) */
        #why-choose-us h2 {
            font-size: 40px;
            margin-bottom: 70px; /* More space */
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 40px; /* Consistent gap */
            margin-top: 40px;
        }

        .feature-item {
            background-color: #f8f9fa; /* Light background for feature items */
            padding: 35px; /* More internal padding */
            border-radius: 12px; /* Slightly more rounded */
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08); /* Stronger initial shadow */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-bottom: 25px; /* Added spacing between feature items */
        }

        .feature-item:last-child {
            margin-bottom: 0; /* No margin after the last item */
        }

        .feature-item:hover {
            transform: translateY(-10px); /* More pronounced lift */
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15); /* Stronger hover shadow */
        }

        .feature-item .icon {
            width: 70px; /* Larger icon container */
            height: 70px;
            margin-bottom: 25px;
            background-color: #0056B3;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 6px 15px rgba(0, 123, 255, 0.4); /* Stronger icon shadow */
        }

        .feature-item .icon svg {
            width: 35px; /* Larger SVG icon */
            height: 35px;
            fill: #fff; /* Ensure SVG color is white */
        }

        .feature-item h3 {
            font-size: 26px; /* Larger feature title */
            margin-bottom: 18px;
            color: #0056B3;
        }

        .feature-item p {
            font-size: 17px;
            color: #555;
        }

        /* FAQ Section Specifics */
        #faq h2 {
            font-size: 40px;
            margin-bottom: 70px;
        }

        .faq-accordion {
            max-width: 850px; /* Wider accordion */
            margin: 0 auto;
            text-align: right; /* Align FAQ content to the right for RTL */
        }

        .faq-item {
            background-color: #fcfcfc; /* Slightly off-white for internal items */
            border-radius: 10px; /* Slightly more rounded */
            margin-bottom: 18px; /* Slightly reduced space between items for compact look */
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05); /* Lighter shadow for items */
            transition: all 0.3s ease; /* Smooth transition for hover/active */
        }

        .faq-item:hover {
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08); /* Slightly stronger shadow on hover */
            transform: translateY(-2px); /* Slight lift on hover */
        }

        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 22px; /* More padding */
            cursor: pointer;
            font-size: 19px; /* Larger font */
            font-weight: bold;
            color: #333;
            background-color: #fff; /* White background for question row */
            border-bottom: 1px solid #eee; /* Subtle separator */
            transition: background-color 0.2s ease, border-bottom 0.3s ease;
        }

        .faq-question:hover {
            background-color: #f0f8ff; /* Very light blue on hover for question */
        }
        
        .faq-question.active {
            background-color: #e6f3ff; /* Slightly darker blue when active */
            border-bottom: none; /* No bottom border when active */
        }

        .faq-question .arrow {
            font-size: 26px; /* Larger arrow */
            transition: transform 0.3s ease;
            color: #0056B3;
            display: flex; /* Make arrow a flex item to center SVG */
            align-items: center;
            justify-content: center;
        }
        .faq-question .arrow svg {
            width: 24px; /* SVG arrow size */
            height: 24px;
            fill: #0056B3;
            transition: transform 0.3s ease;
        }

        .faq-question.active .arrow svg {
            transform: rotate(180deg);
        }

        .faq-answer {
            padding: 0 22px 22px; /* More padding */
            font-size: 17px;
            color: #555;
            max-height: 0; /* Crucial for initial hidden state */
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding 0.4s ease-out;
            text-align: right; /* Ensure answer text aligns right */
            background-color: #fdfdfd; /* Slightly darker white for answer background */
        }

        .faq-question.active + .faq-answer {
            max-height: 300px; /* Increased max-height for content - adjust as needed */
            padding-top: 15px; /* More padding top when open */
        }

        /* Final Call to Action Section Specifics */
        #cta-final {
            margin-top: 80px; /* Added margin to create space before this section */
        }

        #cta-final h2 {
            font-size: 44px; /* Larger heading */
            margin-bottom: 35px;
            color: #ff4d4d; /* Changed to red as per request */
        }

        #cta-final p {
            font-size: 24px; /* Larger paragraph */
            margin-bottom: 50px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            color: #000; /* Changed to black as per request */
        }

        /* Modal (Popup Form) */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.6); /* Black w/ opacity */
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .modal.show {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background-color: #fff;
            margin: auto;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 550px; /* Slightly wider modal */
            position: relative;
            box-shadow: 0 8px 25px rgba(0,0,0,0.25);
            text-align: right;
            transform: translateY(-50px);
            opacity: 0;
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
            display: flex; /* Use flexbox for internal layout */
            flex-direction: column;
            gap: 25px; /* Spacing between internal sections */
        }
        .modal.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }

        .modal-content .close-button {
            color: #aaa;
            float: left; /* For RTL */
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }

        .modal-content .close-button:hover,
        .modal-content .close-button:focus {
            color: #333;
            text-decoration: none;
        }

        .modal-content h3 {
            text-align: center;
            color: #0056B3;
            margin-bottom: 0; /* No margin-bottom here, controlled by gap */
            font-size: 2em;
        }

        .modal-section {
            background-color: #fff; /* White background for modal sections */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08); /* Subtle shadow for each section */
            margin-bottom: 0; /* Managed by modal-content gap */
        }
        .modal-section h4 {
            text-align: right;
            color: #0056B3;
            margin-bottom: 20px;
            font-size: 1.6em;
            border-bottom: 2px solid #eee; /* Separator for section title */
            padding-bottom: 10px;
        }
        
        .modal-content form label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
            text-align: right;
        }

        .modal-content form input[type="text"],
        .modal-content form input[type="tel"],
        .modal-content form input[type="email"],
        .modal-content form input[type="number"], /* MODIFIED: For quantity input */
        .modal-content form textarea {
            width: calc(100% - 20px);
            padding: 12px;
            margin-bottom: 18px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1.1em;
            box-sizing: border-box;
            text-align: right;
            direction: rtl;
        }

        /* Custom Select for Governorate - MODIFIED FOR HIDE/SHOW ON CLICK */
        .custom-select-wrapper {
            position: relative;
            margin-bottom: 18px;
            z-index: 2; /* Ensure dropdown is above other form elements */
        }
        .selected-governorate-display { /* New element to display selected governorate */
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1.1em;
            background-color: #f8f8f8; /* Slightly different background for display */
            box-sizing: border-box;
            text-align: right;
            color: #333;
            cursor: pointer;
            position: relative; /* For arrow icon positioning */
            user-select: none; /* Prevent text selection */
        }
        .selected-governorate-display::after { /* Dropdown arrow */
            content: '▼';
            position: absolute;
            left: 15px; /* Position on the left for RTL */
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8em;
            color: #888;
        }
        .custom-options {
            display: none; /* Hidden by default */
            position: absolute; /* Changed to absolute for dropdown effect */
            top: 100%; /* Position below the selected display */
            left: 0;
            right: 0;
            background-color: #fff;
            border: 1px solid #ddd;
            border-top: none; /* No top border, merges with display */
            border-radius: 0 0 5px 5px; /* Rounded bottom corners */
            max-height: 200px; /* Make it scrollable */
            overflow-y: auto;
            z-index: 10; /* Ensure it's above other elements when open */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 10px 0; /* Adjust padding for options */
        }
        .custom-options.show {
            display: block; /* Show when active */
        }
        
        .custom-select-search {
            width: calc(100% - 30px); /* Adjust for padding */
            padding: 10px;
            margin: 0 15px 10px 15px; /* Margin for separation from options list */
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
            box-sizing: border-box;
            text-align: right;
            direction: rtl;
            background-color: #f0f0f0;
        }
        .custom-option {
            padding: 10px 15px;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid #eee; /* Separator between options */
        }
        .custom-option:last-child {
            border-bottom: none; /* No border after last item */
        }
        .custom-option:hover {
            background-color: #f0f0f0;
            transform: translateX(-3px); /* Slight movement on hover */
        }
        .custom-option.selected {
            background-color: #e6f3ff;
            font-weight: bold;
            color: #0056B3;
            padding: 10px 15px;
        }
        .custom-option .icon {
            width: 20px;
            height: 20px;
            fill: #0056B3;
            flex-shrink: 0; /* Prevent icon from shrinking */
        }


        .modal-content form button[type="submit"] {
            background-color: #0056B3;
            color: #fff;
            padding: 15px 25px;
            border: none;
            border-radius: 50px; /* Consistent button style */
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s;
            width: 100%;
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
        }

        .modal-content form button[type="submit"]:hover {
            background-color: #004085;
            transform: translateY(-2px);
        }

        /* Order Summary in Modal */
        .order-summary {
            background-color: #f8f9fa;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 15px;
            margin-top: 0; /* Managed by modal-content gap */
            margin-bottom: 0; /* Managed by modal-content gap */
            text-align: right;
            font-size: 1.1em;
        }
        .order-summary h4 {
            text-align: center;
            color: #0056B3;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        .order-summary p {
            margin-bottom: 8px;
            color: #444;
            text-align: right; /* Ensure summary text is right-aligned */
            display: flex; /* For aligning text and value */
            justify-content: space-between; /* Space out label and value */
            align-items: center;
        }
        .order-summary p strong {
            color: #000;
        }
        .order-summary p span:first-child { /* Label */
            flex-shrink: 0; /* Prevent label from shrinking */
        }
        .order-summary p span:last-child { /* Value */
            text-align: left; /* Align value to left */
            direction: ltr; /* Ensure numbers are LTR */
            flex-grow: 1; /* Allow value to grow */
            margin-right: 10px; /* Space between label and value */
        }
        /* Specific for summary values that are numbers */
        .order-summary p .summary-value-text {
            direction: rtl; /* Force RTL for text values like name/phone */
            text-align: left;
        }

        .order-summary .product-summary-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
            margin: 0 auto 15px; /* Center image */
            display: block;
            border: 1px solid #ddd;
        }
        .order-summary .total-price-summary {
            font-size: 1.3em;
            font-weight: bold;
            color: #28a745;
            margin-top: 15px;
            border-top: 1px dashed #ccc;
            padding-top: 10px;
            text-align: center;
            display: flex; /* For aligning text and value */
            justify-content: space-between;
        }
        .order-summary .total-price-summary span {
            direction: ltr; /* Ensure numbers are LTR */
            display: inline-block;
        }
        #orderConfirmationModal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 1001; /* Higher than main modal */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        #orderConfirmationModal.show {
            display: flex;
            opacity: 1;
        }
        .confirmation-content {
            background-color: #fff;
            margin: auto;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            transform: translateY(-50px);
            opacity: 0;
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        #orderConfirmationModal.show .confirmation-content {
            transform: translateY(0);
            opacity: 1;
        }
        .confirmation-content h4 {
            color: #28a745; /* Green for success */
            font-size: 1.8em;
            margin-bottom: 15px;
        }
        .confirmation-content p {
            font-size: 1.2em;
            color: #555;
            margin-bottom: 25px;
            text-align: center; /* Ensure message is centered */
        }
        .confirmation-content .close-confirmation-btn {
            background-color: #0056B3;
            color: #fff;
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .confirmation-content .close-confirmation-btn:hover {
            background-color: #004085;
        }
        /* Footer */
        .footer {
            background-color: #003366; /* Dark blue for footer */
            color: #fff;
            text-align: center;
            padding: 40px 0;
            font-size: 0.95em;
            margin-top: 60px; /* Space above footer */
            border-radius: 15px 15px 0 0; /* Rounded top corners */
        }
        /* Responsive Adjustments */
        @media (max-width: 992px) {
            .offer-header { /* MODIFIED for new header */
                font-size: 20px;
                gap: 15px;
            }
            .offer-header .countdown {
                font-size: 20px;
                padding: 6px 12px;
            }
            .offer-header .countdown .value {
                font-size: 1.3em;
            }
            #product-details .product-title {
                font-size: 44px;
            }
            /* Adjusted for new price display */
            .product-current-price-box .price-value {
                font-size: 40px;
            }
            .product-old-price {
                font-size: 26px;
            }
            .tab-button {
                font-size: 20px;
                padding: 12px 25px;
            }
            .tab-content {
                font-size: 17px;
            }
            .btn {
                padding: 14px 30px;
                font-size: 18px;
            }
            h2 {
                font-size: 36px !important;
            }
            section {
                padding: 70px 0;
                margin-bottom: 60px; /* Adjusted margin */
            }
            .gallery-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
            }
            .gallery-item img {
                height: 200px;
            }
            .feature-item .icon {
                width: 65px;
                height: 65px;
            }
            .feature-item .icon svg {
                width: 32px;
                height: 32px;
            }
            .feature-item h3 {
                font-size: 24px;
            }
            .faq-question {
                font-size: 18px;
            }
            #cta-final h2 {
                font-size: 38px;
            }
            #cta-final p {
                font-size: 22px;
            }
            .modal-content {
                max-width: 500px; /* Adjust modal width for smaller screens */
            }
            .modal-section {
                padding: 18px;
            }
            .modal-section h4 {
                font-size: 1.5em;
            }
            .order-summary p {
                font-size: 1em;
            }
        }
        @media (max-width: 768px) {
            .offer-header { /* MODIFIED for new header */
                font-size: 18px;
                gap: 10px;
                padding: 10px 0;
            }
            .offer-header .countdown {
                font-size: 18px;
                padding: 5px 10px;
            }
            .offer-header .countdown .value {
                font-size: 1.2em;
            }
            #product-details .product-title {
                font-size: 38px;
            }
            /* Adjusted for new price display */
            .product-current-price-box .price-value {
                font-size: 36px;
            }
            .product-old-price {
                font-size: 24px;
            }
            .price-display-wrapper {
                flex-direction: column; /* Stack prices vertically on smaller screens */
                gap: 10px;
            }
            .tab-buttons {
                flex-wrap: wrap;
            }
            .tab-button {
                flex-basis: 45%;
                margin: 5px;
                font-size: 18px;
                padding: 10px 15px;
            }
            .tab-content {
                font-size: 16px;
            }
            .btn {
                padding: 12px 25px;
                font-size: 17px;
            }
            h2 {
                font-size: 32px !important;
            }
            section {
                padding: 50px 0;
                margin-bottom: 40px;
            }
            .gallery-grid {
                grid-template-columns: 1fr; /* Single column on very small screens */
            }
            .gallery-item img {
                height: 220px; /* Allow taller images for single column */
            }
            .features-grid {
                grid-template-columns: 1fr; /* Single column */
                gap: 30px;
            }
            .feature-item {
                padding: 30px;
            }
            .feature-item .icon {
                width: 60px;
                height: 60px;
                margin-bottom: 20px;
            }
            .feature-item .icon svg {
                width: 30px;
                height: 30px;
            }
            .feature-item h3 {
                font-size: 22px;
            }
            .faq-question {
                font-size: 17px;
                padding: 18px;
            }
            .faq-answer {
                font-size: 16px;
                padding: 0 18px 18px;
            }
            #cta-final h2 {
                font-size: 34px;
            }
            #cta-final p {
                font-size: 20px;
            }
            .modal-content {
                padding: 20px;
                gap: 20px;
            }
            .modal-section {
                padding: 15px;
            }
            .modal-section h4 {
                font-size: 1.4em;
            }
            .modal-content form input,
            .modal-content form textarea,
            .modal-content form input[type="number"], /* MODIFIED */
            .selected-governorate-display,
            .custom-select-search {
                padding: 10px;
                font-size: 1em;
                margin-bottom: 15px;
            }
            .modal-content form button[type="submit"] {
                padding: 12px 20px;
                font-size: 1.1em;
            }
            .confirmation-content {
                width: 90%;
                padding: 20px;
            }
            .confirmation-content h4 {
                font-size: 1.6em;
            }
            .confirmation-content p {
                font-size: 1.1em;
            }
            .confirmation-content .close-confirmation-btn {
                padding: 10px 20px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="offer-header">
        الحق العرض لفترة محدودة!
        <div class="countdown">
            <span class="days"><span class="value">00</span><span class="label">يوم</span></span>
            <span class="hours"><span class="value">00</span><span class="label">ساعة</span></span>
            <span class="minutes"><span class="value">00</span><span class="label">دقيقة</span></span>
            <span class="seconds"><span class="value">00</span><span class="label">ثانية</span></span>
        </div>
    </div>

    <section id="product-details" class="container">
        <img src="https://via.placeholder.com/600x400" alt="صورة المنتج الرئيسي" class="product-image-main">
        <h1 class="product-title" id="product-name">اسم المنتج الرئيسي هنا</h1>
        <div class="price-display-wrapper">
            <p class="product-old-price">
                <span>ج.م</span> 999.00
            </p>
            <div class="product-current-price-box">
                <span class="currency-unit">ج.م</span>
                <span class="price-value">799.00</span>
            </div>
        </div>
        <p class="product-short-description">وصف قصير وجذاب للمنتج يوضح أهم مميزاته وفوائده بشكل مباشر. هذا النص يشجع العميل على الشراء.</p>
        </section>

    <section id="product-description-usage" class="container">
        <div class="tab-buttons">
            <button class="tab-button active" data-tab="description">الوصف التفصيلي</button>
            <button class="tab-button" data-tab="usage">طريقة الاستخدام</button>
        </div>
        <div id="description-content" class="tab-content active">
            <p>هنا يتم وضع وصف تفصيلي وشامل للمنتج. يمكن أن يتضمن معلومات حول المواد المصنعة، الجودة، التقنيات المستخدمة، وجميع التفاصيل التي قد تهم العميل المحتمل. يفضل استخدام نقاط لسهولة القراءة.</p>
            <ul>
                <li>ميزة 1: شرح مفصل للميزة الأولى وكيف تفيد العميل.</li>
                <li>ميزة 2: شرح مفصل للميزة الثانية وكيف تفيد العميل.</li>
                <li>ميزة 3: شرح مفصل للميزة الثالثة وكيف تفيد العميل.</li>
                <li>ميزة 4: شرح مفصل للميزة الرابعة وكيف تفيد العميل.</li>
            </ul>
        </div>
        <div id="usage-content" class="tab-content">
            <p>في هذا القسم، يتم شرح طريقة استخدام المنتج خطوة بخطوة. يمكن إضافة نصائح وإرشادات لضمان أفضل تجربة للمستخدم.</p>
            <ol>
                <li>الخطوة الأولى: اشرح بوضوح ما يجب فعله أولاً.</li>
                <li>الخطوة الثانية: تابع بالخطوة التالية بشكل تسلسلي.</li>
                <li>الخطوة الثالثة: اختتم بالخطوة النهائية للحصول على النتائج المرجوة.</li>
                <li>نصيحة إضافية: أي نصائح لزيادة الفاعلية أو الأمان.</li>
            </ol>
        </div>
    </section>

    <section id="product-gallery" class="container">
        <h2>صور المنتج</h2>
        <div class="gallery-grid">
            <div class="gallery-item"><img src="https://via.placeholder.com/300x250/FF5733/FFFFFF?text=صورة+1" alt="صورة المنتج 1"></div>
            <div class="gallery-item"><img src="https://via.placeholder.com/300x250/33FF57/FFFFFF?text=صورة+2" alt="صورة المنتج 2"></div>
            <div class="gallery-item"><img src="https://via.placeholder.com/300x250/3357FF/FFFFFF?text=صورة+3" alt="صورة المنتج 3"></div>
            <div class="gallery-item"><img src="https://via.placeholder.com/300x250/FF33CC/FFFFFF?text=صورة+4" alt="صورة المنتج 4"></div>
        </div>
    </section>

    <section id="why-choose-us" class="container">
        <h2>لماذا تختار منتجنا؟</h2>
        <div class="features-grid">
            <div class="feature-item">
                <div class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 8H4V6h16zm-2-4H6v2h12zm2 0c1.1 0 2 .9 2 2v10c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h12zm-8 10c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>
                </div>
                <h3>شحن سريع</h3>
                <p>نضمن لك وصول طلبك في أسرع وقت ممكن لبدء الاستمتاع بمنتجنا.</p>
            </div>
            <div class="feature-item">
                <div class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h-2v-2h2v2zm0-4h-2v-2h2v2z"/></svg>
                </div>
                <h3>أمان معلوماتك</h3>
                <p>بياناتك الشخصية ومعاملاتك المالية في أمان تام معنا.</p>
            </div>
            <div class="feature-item">
                <div class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"/></svg>
                </div>
                <h3>حق الاسترجاع</h3>
                <p>نقدم لك حق استرجاع المنتج خلال فترة محددة إذا لم يكن مرضياً.</p>
            </div>
            <div class="feature-item">
                <div class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                </div>
                <h3>الدفع عند الاستلام</h3>
                <p>ادفع ثمن المنتج نقداً عند استلامه، لراحة بالك ومرونتك.</p>
            </div>
        </div>
    </section>

    <section id="faq" class="container">
        <h2>الأسئلة الشائعة</h2>
        <div class="faq-accordion">
            <div class="faq-item">
                <div class="faq-question">
                    هل المنتج متوفر للشحن الدولي؟
                    <span class="arrow">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                    </span>
                </div>
                <div class="faq-answer">
                    حاليًا، المنتج متاح للشحن داخل مصر فقط. نعمل على توفير خدمة الشحن الدولي قريبًا.
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    ما هي طرق الدفع المتاحة؟
                    <span class="arrow">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                    </span>
                </div>
                <div class="faq-answer">
                    نحن نقدم خدمة الدفع عند الاستلام لضمان راحتك وأمانك.
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    هل يوجد ضمان على المنتج؟
                    <span class="arrow">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                    </span>
                </div>
                <div class="faq-answer">
                    نعم، يأتي المنتج مع ضمان لمدة [اذكر المدة، مثال: سنة كاملة] ضد عيوب التصنيع.
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    هل يمكنني إلغاء الطلب بعد تأكيده؟
                    <span class="arrow">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                    </span>
                </div>
                <div class="faq-answer">
                    يمكنك إلغاء الطلب قبل الشحن. يرجى التواصل مع خدمة العملاء في أقرب وقت ممكن.
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    كم يستغرق وقت التوصيل؟
                    <span class="arrow">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                    </span>
                </div>
                <div class="faq-answer">
                    عادةً ما يتم توصيل الطلبات خلال 3-5 أيام عمل، حسب موقعك الجغرافي.
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    هل يمكنني تغيير عنوان الشحن بعد الطلب؟
                    <span class="arrow">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                    </span>
                </div>
                <div class="faq-answer">
                    نعم، يمكنك تغيير العنوان قبل الشحن عن طريق التواصل مع فريق الدعم لدينا.
                </div>
            </div>
        </div>
    </section>

    <section id="cta-final" class="container">
        <h2>لا تفوت الفرصة!</h2>
        <p>اطلب منتجك الآن واستفد من الخصم الخاص والشحن المجاني قبل انتهاء العرض.</p>
        <button class="btn" id="openPurchaseModalBtn2"> اشتري الآن والحق العرض </button>
    </section>

    <footer class="footer">
        <div class="container">
            <p>  جميع الحقوق محفوظة لمالك الصفحة </p>
        </div>
    </footer>

    <div id="purchaseModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3>أكمل طلبك الآن</h3>

            <div class="modal-section order-summary">
                <h4>ملخص الطلب</h4>
                <img src="https://via.placeholder.com/150x150" alt="صورة المنتج" class="product-summary-image">
                <p><span>المنتج:</span> <span id="summary-product-name" class="summary-value-text">اسم المنتج الرئيسي هنا</span></p>
                <p><span>السعر:</span> <span id="summary-unit-price" class="summary-value-text">799.00 ج.م</span></p>
                <p><span>الكمية:</span> <span id="summary-quantity" class="summary-value-text">1</span></p>
                <p><span>طريقة الدفع:</span> <span class="summary-value-text">الدفع عند الاستلام</span></p>
                <p><span>تكلفة الشحن:</span> <span class="summary-value-text">مجاني</span></p>
                <p class="total-price-summary"><span>الإجمالي:</span> <span id="summary-total-price">799.00 ج.م</span></p>
            </div>

            <div class="modal-section">
                <h4>بيانات الشحن</h4>
                <form id="purchase-form">
                    <label for="customer-name">الاسم كاملاً:</label>
                    <input type="text" id="customer-name" name="customer_name" required>

                    <label for="phone-number">رقم الهاتف:</label>
                    <input type="tel" id="phone-number" name="phone_number" required>

                    <label for="alt-phone-number">رقم هاتف بديل (اختياري):</label>
                    <input type="tel" id="alt-phone-number" name="alt_phone_number">
                    
                    <label for="quantity-input">الكمية:</label>
                    <input type="number" id="quantity-input" name="quantity" min="1" value="1" required> <label for="governorate">المحافظة:</label>
                    <div class="custom-select-wrapper">
                        <div class="selected-governorate-display" id="selected-governorate-display">اختر محافظتك</div>
                        <input type="hidden" id="hidden-governorate-input" name="governorate">
                        <div class="custom-options" id="governorate-options">
                            <input type="text" class="custom-select-search" placeholder="ابحث عن محافظة...">
                            </div>
                    </div>

                    <label for="address">العنوان بالتفصيل:</label>
                    <textarea id="address" name="address" rows="3" required></textarea>

                    <label for="notes">ملاحظات إضافية (اختياري):</label>
                    <textarea id="notes" name="notes" rows="2"></textarea>

                    <button type="submit">تأكيد الطلب</button>
                </form>
            </div>
        </div>
    </div>

    <div id="orderConfirmationModal" class="modal">
        <div class="confirmation-content">
            <h4>تم استلام طلبك بنجاح!</h4>
            <p>سيتم التواصل معك لتأكيد الطلب خلال 24 ساعة.</p>
            <button class="close-confirmation-btn">حسناً</button>
        </div>
    </div>

    <script>
        // Constants (adjust as needed)
        const BASE_PRODUCT_PRICE = 799.00; // Current product price
        const OLD_PRODUCT_PRICE = 999.00; // Old product price

        // Countdown Timer Logic
        const countdown = () => {
            const now = new Date().getTime();
            let expiry = localStorage.getItem('countdownExpiry');
            if (!expiry || new Date(parseInt(expiry)).getTime() < now) {
                expiry = now + (3 * 24 * 60 * 60 * 1000); // 3 days from now
                localStorage.setItem('countdownExpiry', expiry);
            }

            const distance = expiry - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.querySelector('.countdown .days .value').textContent = String(days).padStart(2, '0');
            document.querySelector('.countdown .hours .value').textContent = String(hours).padStart(2, '0');
            document.querySelector('.countdown .minutes .value').textContent = String(minutes).padStart(2, '0');
            document.querySelector('.countdown .seconds .value').textContent = String(seconds).padStart(2, '0');

            if (distance < 0) {
                clearInterval(countdownInterval);
                document.querySelector('.offer-header').textContent = 'انتهى العرض!'; // MODIFIED: Target offer-header
            }
        };

        let countdownInterval = setInterval(countdown, 1000);
        countdown(); // Initial call to display immediately

        // Tab functionality
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                // Remove active from all buttons and contents
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

                // Add active to clicked button and corresponding content
                button.classList.add('active');
                document.getElementById(button.dataset.tab + '-content').classList.add('active');
            });
        });

        // FAQ Accordion
        document.querySelectorAll('.faq-question').forEach(question => {
            question.addEventListener('click', () => {
                const isActive = question.classList.contains('active');
                
                // Close all other open FAQs
                document.querySelectorAll('.faq-question').forEach(q => {
                    if (q !== question && q.classList.contains('active')) {
                        q.classList.remove('active');
                        q.nextElementSibling.style.maxHeight = null;
                        q.nextElementSibling.style.paddingTop = '0';
                    }
                });

                // Toggle the clicked FAQ
                question.classList.toggle('active');
                const answer = question.nextElementSibling;
                if (answer.style.maxHeight) {
                    answer.style.maxHeight = null;
                    answer.style.paddingTop = '0';
                } else {
                    answer.style.maxHeight = answer.scrollHeight + 30 + "px"; // +30 for padding
                    answer.style.paddingTop = '15px';
                }
            });
        });
        // Initialize governorates and FAQ on page load
        document.addEventListener('DOMContentLoaded', () => {
    // Ensure all FAQ answers are hidden on load - هذا الجزء يجب مسحه أيضًا
        document.querySelectorAll('.faq-answer').forEach(answer => {
            answer.style.maxHeight = '0'; 
            answer.style.paddingTop = '0';
        });
            populateGovernorates();
            updateOrderSummary();
            // Initial update of summary on load
        });

        // Modal (Order Form) Functionality
        const purchaseModal = document.getElementById('purchaseModal');
        // Removed openPurchaseModalBtn as it's deleted from HTML. Keeping openPurchaseModalBtn2 only.
        const openPurchaseModalBtns = [document.getElementById('openPurchaseModalBtn2')];
        const closePurchaseModalBtn = purchaseModal.querySelector('.close-button');
        const purchaseForm = document.getElementById('purchase-form');

        // Order Summary Elements
        const summaryProductName = document.getElementById('summary-product-name');
        const summaryUnitPrice = document.getElementById('summary-unit-price');
        const summaryQuantity = document.getElementById('summary-quantity');
        const summaryTotalPrice = document.getElementById('summary-total-price');

        // Form elements for direct manipulation
        const quantityInput = document.getElementById('quantity-input'); // MODIFIED: Get reference to new quantity input type="number"

        const hiddenGovernorateInput = document.getElementById('hidden-governorate-input');
        const selectedGovernorateDisplay = document.getElementById('selected-governorate-display');
        const governorateOptionsContainer = document.getElementById('governorate-options');
        const governorateSearchInput = governorateOptionsContainer.querySelector('.custom-select-search');

        // Populate Governorates (Egypt specific)
        const governorates = [
            "القاهرة", "الجيزة", "الإسكندرية", "القليوبية", "الشرقية", "الغربية", "المنوفية", "البحيرة", "كفر الشيخ",
            "دمياط", "بورسعيد", "الإسماعيلية", "السويس", "الفيوم", "بني سويف", "المنيا", "أسيوط", "سوهاج", "قنا",
            "الأقصر", "أسوان", "الوادي الجديد", "مطروح", "البحر الأحمر", "شمال سيناء", "جنوب سيناء"
        ];

        const populateGovernorates = () => {
            const optionsHtml = governorates.map(gov => `
                <div class="custom-option" data-value="${gov}">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
                    ${gov}
                </div>
            `).join('');
            governorateOptionsContainer.innerHTML = `<input type="text" class="custom-select-search" placeholder="ابحث عن محافظة...">` + optionsHtml;
            // Re-select search input after repopulating
            governorateSearchInput.removeEventListener('input', filterGovernorates); // Remove old listener
            governorateSearchInput.addEventListener('input', filterGovernorates); // Add new listener
            addGovernorateOptionListeners();
        };

        const addGovernorateOptionListeners = () => {
            governorateOptionsContainer.querySelectorAll('.custom-option').forEach(option => {
                option.addEventListener('click', () => {
                    const value = option.dataset.value;
                    selectedGovernorateDisplay.textContent = value;
                    hiddenGovernorateInput.value = value;
                    governorateOptionsContainer.classList.remove('show');
                    // Remove 'selected' class from all, then add to the clicked one
                    governorateOptionsContainer.querySelectorAll('.custom-option').forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    updateOrderSummary();
                });
            });
        };

        const filterGovernorates = () => {
            const searchValue = governorateSearchInput.value.toLowerCase();
            governorateOptionsContainer.querySelectorAll('.custom-option').forEach(option => {
                const governorateName = option.dataset.value.toLowerCase();
                if (governorateName.includes(searchValue)) {
                    option.style.display = 'flex';
                } else {
                    option.style.display = 'none';
                }
            });
        };

        selectedGovernorateDisplay.addEventListener('click', () => {
            governorateOptionsContainer.classList.toggle('show');
            governorateSearchInput.focus();
        });

        // Close custom select when clicking outside
        document.addEventListener('click', (e) => {
            if (!selectedGovernorateDisplay.contains(e.target) && !governorateOptionsContainer.contains(e.target)) {
                governorateOptionsContainer.classList.remove('show');
            }
        });

        const updateOrderSummary = () => {
            const currentQuantity = parseInt(quantityInput.value || 1); // Default to 1 if not set
            const currentPrice = BASE_PRODUCT_PRICE;
            const currentTotalPrice = (currentQuantity * currentPrice).toFixed(2);

            summaryProductName.textContent = document.getElementById('product-name').textContent;
            summaryUnitPrice.textContent = `${currentPrice.toFixed(2)} ج.م`;
            summaryQuantity.textContent = currentQuantity;
            summaryTotalPrice.textContent = `${currentTotalPrice} ج.م`;
        };

        // Add event listener for quantity input change
        quantityInput.addEventListener('input', updateOrderSummary); // MODIFIED: Use 'input' event for number field

        openPurchaseModalBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                purchaseModal.classList.add('show');
                updateOrderSummary(); // Update summary when modal opens
            });
        });

        const closePurchaseModal = () => {
            purchaseModal.classList.remove('show');
        };

        closePurchaseModalBtn.addEventListener('click', closePurchaseModal);

        // Close modal when clicking outside
        purchaseModal.addEventListener('click', (e) => {
            if (e.target === purchaseModal) {
                closePurchaseModal();
            }
        });

        // Order Confirmation Modal
        const orderConfirmationModal = document.getElementById('orderConfirmationModal');
        const closeConfirmationBtn = orderConfirmationModal.querySelector('.close-confirmation-btn');

        const showConfirmationMessage = () => {
            orderConfirmationModal.classList.add('show');
        };

        const closeConfirmationMessage = () => {
            orderConfirmationModal.classList.remove('show');
        };

        // Form Submission (Updated for JotForm Integration)
        purchaseForm.addEventListener('submit', async (e) => {
            e.preventDefault(); // Prevent default form submission

            // Gather data from the current form elements
            const customerName = document.getElementById('customer-name').value;
            const phoneNumber = document.getElementById('phone-number').value;
            const altPhoneNumber = document.getElementById('alt-phone-number').value;
            const quantity = parseInt(quantityInput.value); 
            const governorate = hiddenGovernorateInput.value; 
            const address = document.getElementById('address').value;
            const notes = document.getElementById('notes').value;

            // Create FormData object for JotForm submission
            const jotFormData = new FormData();
            jotFormData.append('formID', '251812393748060'); // JotForm Form ID
            jotFormData.append('q5_input5', customerName); // الاسم كاملاً
            jotFormData.append('q7_input7[full]', phoneNumber); // رقم الهاتف
            jotFormData.append('q8_input8[full]', altPhoneNumber); // رقم الهاتف الاحتياطي
            jotFormData.append('q10_input10', quantity); // الكمية
            jotFormData.append('q12_input12', governorate); // المحافظة
            jotFormData.append('q13_input13', address); // العنوان بالتفصيل
            jotFormData.append('q14_input14', notes); // ملاحظات

            // Note: product_name, unit_price, old_unit_price, total_price,
            // payment_method, shipping_cost from the original formData are not
            // directly mapped to JotForm fields unless explicitly created there.
            // If JotForm needs these, you would add corresponding hidden fields or
            // create new fields in your JotForm and map them here.

            try {
                const response = await fetch('https://submit.jotform.com/submit/251812393748060', {
                    method: 'POST',
                    body: jotFormData, 
                });

                if (response.ok) { // Check if the submission was successful
                    console.log('JotForm submission successful.');
                } else {
                    console.error('JotForm submission failed. Status:', response.status);
                    alert('حدث خطأ أثناء إرسال طلبك. الرجاء المحاولة مرة أخرى.');
                    return;
                }

            } catch (error) {
                console.error('Error submitting to JotForm:', error);
                alert('حدث خطأ أثناء إرسال طلبك. الرجاء المحاولة مرة أخرى.');
                return; 
            }
            
            closePurchaseModal(); // Close the order form modal
            showConfirmationMessage(); // Show the success message modal
        });

        closeConfirmationBtn.addEventListener('click', closeConfirmationMessage);

        // Close confirmation modal when clicking outside
        orderConfirmationModal.addEventListener('click', (e) => {
            if (e.target === orderConfirmationModal) {
                closeConfirmationMessage();
            }
        });

        // Initialize governorates and FAQ on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Ensure all FAQ answers are hidden on load
            document.querySelectorAll('.faq-answer').forEach(answer => {
                answer.style.maxHeight = '0';
                answer.style.paddingTop = '0';
            });
            populateGovernorates();
            updateOrderSummary(); // Initial update of summary on load
        });
    </script>
</body>
</html>
